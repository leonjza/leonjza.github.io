<!doctype html><html lang=en>
<head>
<title>
objection - runtime mobile exploration ::
#!/bin/note
— a checkbox uncheckers notepad
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content=" In this post, I want to introduce you to a toolkit that I have been working on, called objection. The name being a play on the words &amp;ldquo;object&amp;rdquo; and &amp;ldquo;injection&amp;rdquo;. objection is a runtime exploration toolkit powered by Frida, aimed at mobile platforms. objection aims to allow you to perform various security related tasks on unencrypted iOS applications, at runtime, on non-jailbroken iOS devices as well as Android applications on Android devices. Features include inspecting the application specific keychain, as well as inspecting various artifacts left on disk during (or after) execution.
">
<meta name=keywords content="blog,hack,ctf,leonjza,pentester,red team,attack">
<meta name=robots content="noodp">
<link rel=canonical href=https://leonjza.github.io/blog/2017/07/11/objection-runtime-mobile-exploration/>
<link rel=stylesheet href=https://leonjza.github.io/assets/style.css>
<link rel=stylesheet href=https://leonjza.github.io/style.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=https://leonjza.github.io/img/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=https://leonjza.github.io/img/favicon.png>
<link href=https://leonjza.github.io/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://leonjza.github.io/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://leonjza.github.io/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://leonjza.github.io/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://leonjza.github.io/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://leonjza.github.io/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="objection - runtime mobile exploration">
<meta name=twitter:description content="
    
    
  


In this post, I want to introduce you to a toolkit that I have been working on, called objection. The name being a play on the words &ldquo;object&rdquo; and &ldquo;injection&rdquo;. objection is a runtime exploration toolkit powered by Frida, aimed at mobile platforms. objection aims to allow you to perform various security related tasks on unencrypted iOS applications, at runtime, on non-jailbroken iOS devices as well as Android applications on Android devices. Features include inspecting the application specific keychain, as well as inspecting various artifacts left on disk during (or after) execution.">
<meta property="og:title" content="objection - runtime mobile exploration">
<meta property="og:description" content="
    
    
  


In this post, I want to introduce you to a toolkit that I have been working on, called objection. The name being a play on the words &ldquo;object&rdquo; and &ldquo;injection&rdquo;. objection is a runtime exploration toolkit powered by Frida, aimed at mobile platforms. objection aims to allow you to perform various security related tasks on unencrypted iOS applications, at runtime, on non-jailbroken iOS devices as well as Android applications on Android devices. Features include inspecting the application specific keychain, as well as inspecting various artifacts left on disk during (or after) execution.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://leonjza.github.io/blog/2017/07/11/objection-runtime-mobile-exploration/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-07-11T14:05:41+02:00">
<meta property="article:modified_time" content="2017-07-11T14:05:41+02:00"><meta property="og:site_name" content="#!/bin/note
">
</head>
<body class=dark-theme>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>#!/bin/note
</span>
<span class=logo__cursor></span>
</a>
<span class=header__right>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/about/>About Me</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/posts>Posts</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=/about/>About Me</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/posts>Posts</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
<span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>objection - runtime mobile exploration</h1>
<div class=post-meta>
<span class=post-date>
2017-07-11
</span>
<span class=post-read-time>— 4 min read</span>
</div>
<div class=post-content>
<h2>Table of Contents</h2>
<aside class=table-of-contents><nav id=TableOfContents>
<ul>
<li><a href=#why>why</a></li>
<li><a href=#examples>examples</a></li>
<li><a href=#sample-usage>sample usage</a></li>
<li><a href=#features>features</a></li>
<li><a href=#get-it>get it</a></li>
</ul>
</nav></aside>
<figure class=left>
<img src=/images/objection/objection.png>
</figure>
<p>In this post, I want to introduce you to a toolkit that I have been working on, called <a href=https://github.com/sensepost/objection>objection</a>. The name being a play on the words &ldquo;object&rdquo; and &ldquo;injection&rdquo;. objection is a runtime exploration toolkit powered by Frida, aimed at mobile platforms. objection aims to allow you to perform various security related tasks on unencrypted iOS applications, at runtime, on non-jailbroken iOS devices as well as Android applications on Android devices. Features include inspecting the application specific keychain, as well as inspecting various artifacts left on disk during (or after) execution.</p>
<p>With jailbreaks for iOS devices becoming increasingly difficult to come by (not to mention the often &lsquo;dodgy&rsquo; utilities out there to perform the exploits that allow you access outside of the iOS jail), the expectation of iOS 11 coming soon and many other operational issues faced when trying to prevent an existing iOS device from updating (and losing the jailbreak), objection will allow you to perform a large portion of the typical mobile security assessment all within the existing constraints of the application sandbox.</p>
<h1 id=why>why</h1>
<p>Many times, we as analysts find ourselves in a position where we need to explain the &ldquo;real world relevance&rdquo; of the epic pwnage you had. Often, admitting to the fact that your device was Jailbroken, leaves much to be questioned about how &ldquo;real&rdquo; the attacks you performed are. &ldquo;But if you had root, its technically over anyways, right?&rdquo;. Yes, but that is not the only way.</p>
<p>Client engagement examples aside, most of the tooling that exists out there rely on the fact that your device is jailbroken (and rightfully so). But what if you simply dont have a Jailbroken device? Well, chances are you only focus on the API endpoints that the application consumes, hoping that the SSL pinning is broken enough for you to get an idea of how it works.</p>
<p>Lets change that.</p>
<h1 id=examples>examples</h1>
<p>Under the hood, objection uses Frida to inject objects into a patched applications runtime and executes them within that applications security context to perform various tasks. Typical tasks may be short lived commands such as ls that will let you browse the mobile devices filesystem from the mobile applications perspective, or longer lived commands such as ios sslpinning disable that hooks common methods that are used to pin SSL certificates, and prevent validations from failing as you use the app.</p>
<figure class=left>
<img src=/images/objection/objection_ls.png>
</figure>
<p>While we are talking about the filesystem, it is also possible to download files straight off the device (where you have read access) as well as have the ability to re-upload files where write access is granted, such as the applications Documents directory.</p>
<p>objection also includes an inline SQLite editor to make manipulating random sqlite databases that might exist a breeze.</p>
<figure class=left>
<img src=/images/objection/objection_sqlite.png>
</figure>
<p>Connecting to and querying an arbitrary SQLite database within an applications Documents directory.</p>
<h1 id=sample-usage>sample usage</h1>
<p>A sample session where objection is used to explore various parts of a sample iOS application that is already patched and running is shown below:</p>
<h1 id=features>features</h1>
<p>While still a work in progress, objection already contains a number of features. A few notable ones are:</p>
<ul>
<li>Interact with the remote filesystem to move around, upload and download files where ever access is granted.</li>
<li>Dump the current processes memory, explore loaded modules and module exports.</li>
<li>Interact with SQLite databases on the remote filesystem.</li>
<li>Dump various bits of shared storages such as NSUserDefaults, NSHTTPCookieStorage and .plist files on an iOS devices disk in a human readable format.</li>
<li>Simulate a jailbroken environment to test an iOS applications behaviour in such an environment.</li>
<li>An iOS SSL pinning bypass module that implements the widely known SSL-Killswitch2 methods.</li>
<li>Dump the iOS keychain.</li>
<li>Perform iOS TouchID bypasses.</li>
<li>Perform a type of class-dump that will list the available Objective-C classes and class methods.</li>
<li>Dynamically hook and watch for method invocations of a specific class method. Additionally, objection can try and dump method arguments passed as they are invoked.</li>
</ul>
<p>&mldr; and much more.</p>
<h1 id=get-it>get it</h1>
<p>You can get objection right now over at https://github.com/sensepost/objection. Some setup work is needed, as well as a patching process for the IPA you are interested in. Fear not, all of that stuff is documented on the projects wiki that can be found here: https://github.com/sensepost/objection/wiki.</p>
</div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=https://leonjza.github.io/blog/2017/12/13/building-the-bsidescpt17-rf-challenge/>
<span class=button__icon>←</span>
<span class=button__text>building the bsidescpt17 rf challenge</span>
</a>
</span>
<span class="button next">
<a href=https://leonjza.github.io/blog/2017/03/24/sending-am-ook-using-metasploit-and-rfstransceiver/>
<span class=button__text>sending am-ook using metasploit and rfstransceiver</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<div class="copyright copyright--user"><a href=https://twitter.com/leonjza>@leonjza</a></div>
</div>
</footer>
<script src=https://leonjza.github.io/assets/main.js></script>
<script src=https://leonjza.github.io/assets/prism.js></script>
</div>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-44457032-2','auto'),ga('send','pageview'))</script>
</body>
</html>